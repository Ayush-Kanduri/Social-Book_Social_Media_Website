<script defer src="/js/home.js"></script>
<h3><%= title%></h3>

<section class="feed-posts">
	<h4>Posts</h4>
	<% if(locals.user){ %>
	<form action="/posts/create" id="new-post-form" method="post">
		<textarea
			name="content"
			cols="30"
			rows="3"
			placeholder="Type Here..."
		></textarea>
		<input type="submit" value="Post" />
	</form>
	<% } %>

	<div class="posts-list-container">
		<ul>
			<% for(post of posts){ %>
			<li>
				<p>
					<%= post.content %>
					<br />
					<small><%= post.user.name %></small>
				</p>
				<div class="post-comments">
					<% if(locals.user){ %>
					<form action="/comments/create" method="post">
						<textarea
							name="content"
							cols="20"
							rows="3"
							placeholder="Type Here To Add Comment ..."
						></textarea>
						<!-- Send ID of this specific Post where the Comment would be added  -->
						<input type="hidden" name="post" value="<%= post._id %>" />
						<input type="submit" value="Add Comment" />
					</form>
					<% } %>
					<div class="post-comments-list">
						<ul id="post-comments-<%= post._id %>">
							<% for(comment of post.comments){ %>
							<li>
								<p>
									<%= comment.content %>
									<br />
									<%= comment.user.name %>
								</p>
							</li>
							<% } %>
						</ul>
					</div>
				</div>
			</li>
			<% } %>
		</ul>
	</div>
</section>
